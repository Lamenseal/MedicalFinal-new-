@{
    ViewData["Title"] = "ListTest";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section css{ 
<style>
    .container th{
        text-align:center;
    }
</style>
}
<!-- Hero Start -->
<div class="container-fluid bg-primary py-5 hero-header mb-5">
    <div class="row py-3">
        <div class="col-12 text-center">
            <h3 class="display-3 text-white animated zoomIn">門診時間表</h3>
        </div>
    </div>
</div>
<!-- Hero End -->
<div class="container">
    <div class="row">
        <div class="data_div">
            <div class="data_detail">
                <h1 class="data_title text-center">門診時間</h1>
                <div data_content>
                    <table class="table table-bordered table-hover">
                        <thead class="thead-light">
                            <tr>
                                <th>時間</th>
                                <th>星期一</th>
                                <th>星期二</th>
                                <th>星期三</th>
                                <th>星期四</th>
                                <th>星期五</th>
                                <th>星期六</th>
                                <th>星期日</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="period1">
                                <th>
                                    上午<br />08:00<br />|<br />12:00
                                </th>
                                <td class="day1">
                                </td>
                                <td class="day2">
                                </td>
                                <td class="day3">
                                </td>
                                <td class="day4">
                                </td>
                                <td class="day5">
                                </td>
                                <td class="day6">
                                </td>
                                <td class="day0">
                                </td>
                            </tr>
                            <tr class="period2">
                                <th>
                                    下午<br />14:00<br />|<br />17:30
                                </th>
                                <td class="day1">
                                </td>
                                <td class="day2">
                                </td>
                                <td class="day3">
                                </td>
                                <td class="day4">
                                </td>
                                <td class="day5">
                                </td>
                                <td class="day6">
                                </td>
                                <td class="day0">
                                </td>
                            </tr>
                            <tr class="period3">
                                <th>
                                    晚上<br />17:30<br />|<br />20:30
                                </th>
                                <td class="day1">
                                </td>
                                <td class="day2">
                                </td>
                                <td class="day3">
                                </td>
                                <td class="day4">
                                </td>
                                <td class="day5">
                                </td>
                                <td class="day6">
                                </td>
                                <td class="day0">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts{ 
    <script>
        loadClinicDetail(1)
        loadClinicDetail(2)
        loadClinicDetail(3)
        async function loadClinicDetail(period) {
            const details = await fetch('@Url.Content("~/ClinicDetail/loadClinicDetail")' + `?period=${period}`).then(response => response.json());
            console.log(details)
            if (details.length != 0) {
                for (let i = 0; i < details.length; i++) {
                    td = ` <a href="/reserve/reservelist">
                          <b>${details[i].doctorName}</b>
                        </a><br />`

                    document.querySelector(`.period${period} .day${new Date(details[i].clinicDate).getDay()}`).innerHTML += td;
                }
            }
            else
                return;
    }
    </script>
}